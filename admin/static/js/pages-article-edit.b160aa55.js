(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-article-edit"],{"3f4e":function(e,t,a){var i=a("47fc");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("967d").default;o("6afc75f4",i,!0,{sourceMap:!1,shadowMode:!1})},"47fc":function(e,t,a){var i=a("c86c");t=i(!1),t.push([e.i,'@charset "UTF-8";.padding-10[data-v-1ad7b4b7]{padding:10px}.marginLeft-10[data-v-1ad7b4b7]{margin-left:10px}.footer-update-btn[data-v-1ad7b4b7]{width:80px}.footer-back-btn[data-v-1ad7b4b7]{margin-left:20px;width:80px}\n/* 上传组件开始 */[data-v-1ad7b4b7] .sku-image .vk-data-upload .el-upload-dragger{height:60px}[data-v-1ad7b4b7] .sku-image .vk-data-upload .el-upload--picture-card{width:60px;height:60px}[data-v-1ad7b4b7] .sku-image .vk-data-upload .el-upload{width:60px;height:60px;line-height:60px}[data-v-1ad7b4b7] .sku-image .vk-data-upload .el-upload-list--picture-card .el-upload-list__item{width:60px;height:60px;line-height:60px}[data-v-1ad7b4b7] .sku-image .vk-data-upload .el-upload-list--picture-card .el-upload-list__item-thumbnail{width:60px;height:60px;line-height:60px}[data-v-1ad7b4b7] .sku-image .vk-data-upload .avatar{width:60px;height:60px}[data-v-1ad7b4b7] .sku-image .el-upload--picture-card i{font-size:14px;color:#8c939d}.hoverStyle[data-v-1ad7b4b7]:hover{-webkit-transform:scale(1.1);transform:scale(1.1)}',""]),e.exports=t},"660b":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("vk-data-page-header",{attrs:{title:e.page.title,"show-back":!0},on:{back:function(t){arguments[0]=t=e.$handleEvent(t),e.pageBack()}}}),a("v-uni-view",{staticClass:"page-body"},[a("vk-data-form",{ref:"form1",attrs:{rules:e.formData1.rules,action:e.formData1.action,"form-type":e.formData1.formType,columns:e.formData1.columns,"label-width":"100px","footer-show":!1,loading:e.formData1.loading,"before-action":e.formData1.beforeAction},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.formData1,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.formSuccess.apply(void 0,arguments)}},model:{value:e.form1,callback:function(t){e.form1=t},expression:"form1"}})],1),a("v-uni-view",{staticClass:"page-footer"},[a("el-button",{staticClass:"footer-back-btn",attrs:{plain:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pageBack()}}},[e._v("返回")]),a("el-button",{staticClass:"footer-update-btn",staticStyle:{"margin-left":"50px"},attrs:{loading:e.formData1.loading,type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v(e._s(e.page.submitText))])],1)],1)},o=[]},"87df":function(e,t,a){"use strict";var i=a("3f4e"),o=a.n(i);o.a},9745:function(e,t,a){"use strict";var i;a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("4100");var o=uni.vk,n={},l={data:function(){return{page:{title:"",submitText:"",pickerOptions:o.pubfn.elementUtil.datePickerRangeOptions(),backPage:"/pages/article/list"},form1:{is_publish:!0,is_recommend:!1,is_new:!1,is_hot:!1,sort:0,count:{view:0,initial_view:0}},formData1:{action:"admin/sys.article.addUpdate",columns:[{key:"",title:"基本信息",type:"bar-title"},{key:"name",title:"文章名称",type:"text",width:600,maxlength:20,showWordLimit:!0,tips:"一个好的文章名称会增加文章的浏览量！20字以内"},{key:"category_ids",title:"选择分类",type:"cascader",width:600,action:"admin/sys.category.kh_getList",actionData:{formData:{type:"article",enable:!0},columns:[{key:"type",mode:"%%"},{key:"enable",mode:"="}]},props:{list:"rows",value:"_id",label:"name",children:"children",checkStrictly:!0,emitPath:!1,multiple:!0},tips:"准确选择文章分类有助于完善文章信息与数据分析。"},{key:"description",title:"详细描述",type:"text",width:600,maxlength:60,showWordLimit:!0,tips:"在文章详情页标题下面展示卖点信息，60字以内"},{key:"keywords",title:"文章关键字",type:"text",width:600,maxlength:60,showWordLimit:!0},{key:"",title:"图片信息",type:"bar-title"},{key:"image",title:"文章缩略图",type:"file-select",placeholder:"请选择图片",fileType:"image",tips:"建议尺寸：800*800像素，限1张",imageFit:"cover"},{key:"images",title:"文章轮播图",type:"file-select",placeholder:"请选择图片",fileType:"image",multiple:!0,multipleLimit:9,tips:"建议尺寸：800*800像素，最多上传9张",imageFit:"cover"},{key:"",title:"视频信息",type:"bar-title"},{key:"videos",title:"文章轮播视频",type:"file-select",placeholder:"请选择视频",fileType:"video",multiple:!0,multipleLimit:3,tips:"最多上传3个视频",imageFit:"cover",showRule:function(e){return!uni.vk.getVuex("$app.config.login.testUser.show")}},{key:"video_download",title:"是否允许下载",type:"switch",tips:"视频文件最好不要超过150M，无法在微信直接下载！"},{key:"",title:"文章详情介绍",type:"bar-title"},{key:"content",title:"文章详情图文",type:"custom",component:"custom-editor-tinymce",width:950,height:800,placeholder:"开始输入..."},{key:"tags",title:"文章标签",type:"tag"},{key:"",title:"文章配置",type:"bar-title"},{key:"is_publish",title:"是否发布",type:"switch"},{key:"is_new",title:"是否新品",type:"switch"},{key:"is_recommend",title:"是否推荐",type:"switch"},{key:"is_hot",title:"是否热门",type:"switch"},{key:"",title:"其他信息",type:"bar-title"},{key:"count",title:"",type:"object",width:180,showLabel:!1,columns:[{key:"initial_view",title:"初始阅读量",type:"number",width:600}]},{key:"sort",title:"排序值",type:"number",width:600,tips:"值越大，文章显示越在前面。"}],rules:{name:[{required:!0,message:"文章名称为必填字段",trigger:"blur"},{min:2,max:20,message:"文章名长度为2-20个字符",trigger:"blur"}],is_publish:[{required:!0,message:"是否上架为必填字段",trigger:["blur","change"]}],image:[{required:!1,message:"请上传文章缩略图",trigger:["blur","change"]}],images:[{required:!1,message:"请上传文章banner图",trigger:["blur","change"]}]},formType:"",show:!1,loading:!1,beforeAction:function(){}}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,o=i.vk,i.options=e,i.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){n["form1"]=o.pubfn.copyObject(i.form1),i.formData1.formType=e.mode,i.form1.mode=e.mode,"update"===e.mode?(i.page.title="文章编辑",i.page.submitText="修改",o.callFunction({url:"admin/sys.article.findInfo",title:"请求中...",data:{_id:e._id},success:function(e){var t=o.pubfn.copyObject(i.form1);i.form1=o.pubfn.objectAssign(t,e.info)}})):(i.page.title="文章添加",i.page.submitText="添加",e._id?o.callFunction({url:"admin/sys.article.findInfo",title:"请求中...",data:{_id:e._id},success:function(e){var t=o.pubfn.copyObject(i.form1),a=e.info;delete a._id,delete a._add_time,delete a._add_time_str,delete a.publish_time,delete a.update_time,delete a.delete_time,a.count={view:0,initial_view:0},a.name=a.name+"-copy",i.form1=o.pubfn.objectAssign(t,a),i.getSortMax()}}):i.getSortMax())},getSortMax:function(){o.callFunction({url:"admin/sys.article.getMaxSort",data:{},success:function(e){i.form1.sort=e.sort+1}})},pageTo:function(e){o.navigateTo(e)},pageBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("update"==e.formType){var t=this.getOpenerEventChannel();t.emit&&t.emit("update",e.data.info)}else if("add"==e.formType){var a=this.getOpenerEventChannel();a.emit&&a.emit("add")}var n=getCurrentPages();n.length>1&&n[0].route!==i.$page.route?o.navigateBack():i.page.backPage&&o.navigateTo(i.page.backPage),setTimeout((function(){o.menuTabs.closeTabs("/pages/article/edit")}),600)},resetForm:function(){o.pubfn.resetForm(n,i)},submitForm:function(){i.form1.mode=i.options.mode,"copy"==i.options.mode&&(i.form1.mode="add"),i.$refs.form1.submitForm()},formSuccess:function(e){"add"==i.formData1.formType?i.$alert("文章添加成功","提示",{confirmButtonText:"好的",callback:function(t){i.pageBack(e)}}):i.$alert("文章修改成功","提示",{confirmButtonText:"好的",callback:function(t){i.pageBack(e)}})}},watch:{},computed:{}};t.default=l},a5ea:function(e,t,a){"use strict";a.r(t);var i=a("660b"),o=a("ee96");for(var n in o)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("87df");var l=a("828b"),r=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"1ad7b4b7",null,!1,i["a"],void 0);t["default"]=r.exports},ee96:function(e,t,a){"use strict";a.r(t);var i=a("9745"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a}}]);